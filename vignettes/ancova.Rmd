---
title: "ANCOVA Analyses for MHF 2019 and 2020 Data"
author: "Zachary Levine"
date: "`r Sys.Date()`"
output: pdf_document
vignette: >
  %\VignetteIndexEntry{Vignette Title}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

Let's start by creating our data of interest for %No shows (attendance).

```{r}
##Use to bypass having to use double colon operator each time.
read_data <- RMHF::read_data

df2019 <- read_data()[1:11,]
df2020 <- read_data()[12:22,]
var2019 <- as.numeric(df2019$"% of patients who were no-shows")
var2020 <- as.numeric(df2020$"% of patients who were no-shows")
intervention <- c(rep("no", 6), rep("yes", 5))
df <- data.frame("pre" = var2019, "post" = var2020, "int" = intervention, stringsAsFactors = FALSE)
```
Now we can regress 2020 data on the categorical presence of the intervention, with 2019 data as the covariate.
```{r}
library(rstatix)
anova_test(data = df, formula = post ~ pre + int)
```

Now for Met-minutes.

```{r}
df2019 <- read_data()[1:11,]
df2020 <- read_data()[12:22,]
var2019 <- as.numeric(df2019$"Met-minutes")
var2020 <- as.numeric(df2020$"Met-minutes")
intervention <- c(rep("no", 6), rep("yes", 5))
dfmets <- data.frame("pre" = var2019, "post" = var2020, "int" = intervention, stringsAsFactors = FALSE)
```
Now we can regress 2020 data on the categorical presence of the intervention, with 2019 data as the covariate.
```{r}
anova_test(data = dfmets, formula = post ~ pre + int)
```

Now for % Females

```{r}
df2019 <- read_data()[1:11,]
df2020 <- read_data()[12:22,]
var2019 <- as.numeric(df2019$"% of patients who were no-shows")
var2020 <- as.numeric(df2020$"% of patients who were no-shows")
intervention <- c(rep("no", 6), rep("yes", 5))
dfmets <- data.frame("pre" = var2019, "post" = var2020, "int" = intervention, stringsAsFactors = FALSE)
```
Now we can regress 2020 data on the categorical presence of the intervention, with 2019 data as the covariate.
```{r}
anova_test(data = dfmets, formula = post ~ pre + int)
```

Now for Age

```{r}
df2019 <- read_data()[1:11,]
df2020 <- read_data()[12:22,]
var2019 <- as.numeric(df2019$"Age")
var2020 <- as.numeric(df2020$"Age")
intervention <- c(rep("no", 6), rep("yes", 5))
dfmets <- data.frame("pre" = var2019, "post" = var2020, "int" = intervention, stringsAsFactors = FALSE)
```
Now we can regress 2020 data on the categorical presence of the intervention, with 2019 data as the covariate.
```{r}
anova_test(data = dfmets, formula = post ~ pre + int)
```

Now for Prescheduled appointments"  
```{r}
df2019 <- read_data()[1:11,]
df2020 <- read_data()[12:22,]
var2019 <- as.numeric(df2019$"Prescheduled appointments")
var2020 <- as.numeric(df2020$"Prescheduled appointments")
intervention <- c(rep("no", 6), rep("yes", 5))
dfmets <- data.frame("pre" = var2019, "post" = var2020, "int" = intervention, stringsAsFactors = FALSE)
```

Now we can regress 2020 data on the categorical presence of the intervention, with 2019 data as the covariate.
```{r}
anova_test(data = dfmets, formula = post ~ pre + int)
```

In conclusion, after adjusting for 2019 data, the intervention had no significant effect on 2020 data for any of the variables studied.
